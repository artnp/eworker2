<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retouch - ‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏£‡∏π‡∏õ‡∏Ñ‡∏£‡∏∏‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <meta name="description" content="‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏ä‡∏∏‡∏î‡∏Ñ‡∏£‡∏∏‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏´‡∏≤‡∏•‡∏±‡∏¢ ‡∏Ñ‡∏ì‡∏∞ ‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏á‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Anuphan:wght@300;400;600&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=3">
    <link rel="stylesheet" href="css/style_modal.css?v=2">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>üéì ‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢ <span class="highlight">‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏£‡∏á</span></h1>
            <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏¥‡∏ß‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
        </header>

        <main>
            <div class="card glass">
                <!-- Progress Bar -->
                <div class="step-progress">
                    <div class="step-indicator active" data-step="1"><span>1</span></div>
                    <div class="step-line"></div>
                    <div class="step-indicator" data-step="2"><span>2</span></div>
                    <div class="step-line"></div>
                    <div class="step-indicator" data-step="3"><span>3</span></div>
                    <div class="step-line"></div>
                    <div class="step-indicator" data-step="4"><span>4</span></div>
                </div>

                <form id="orderForm">
                    <!-- Step 1: Upload Photo -->
                    <div class="form-step active" id="step1">
                        <div class="form-section">
                            <label class="section-title">1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß & ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢</label>

                            <!-- Gender Selector Moved Here -->
                            <p class="section-desc" style="margin-bottom: 10px;">‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏û‡∏®‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                            <div class="gender-selector" style="margin-bottom: 20px;">
                                <label class="radio-card">
                                    <input type="radio" name="gender" value="male">
                                    <div class="card-content">
                                        <span class="icon">ü§µ</span>
                                        <span>‡∏ä‡∏≤‡∏¢</span>
                                    </div>
                                </label>
                                <label class="radio-card">
                                    <input type="radio" name="gender" value="female">
                                    <div class="card-content">
                                        <span class="icon">üë©‚Äçüéì</span>
                                        <span>‡∏´‡∏ç‡∏¥‡∏á</span>
                                    </div>
                                </label>
                            </div>



                            <p class="section-desc">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏£‡∏á ‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏´‡∏•‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÜ (‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ)
                            </p>
                            <div class="upload-area" id="dropZone">
                                <input type="file" id="faceImage" accept="image/*" required hidden>
                                <div class="upload-placeholder" id="uploadPlaceholder">
                                    <img src="https://cdn-icons-png.flaticon.com/128/11264/11264662.png"
                                        alt="Selfie Icon" class="custom-icon" style="width: 80px; margin-bottom: 10px;">
                                    <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                                    <small>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB</small>
                                    <div class="or-divider">- ‡∏´‡∏£‡∏∑‡∏≠ -</div>
                                    <button type="button" class="btn-camera" id="openCameraBtn">üì∏
                                        ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏•‡∏¢</button>
                                </div>

                                <div id="cameraContainer" class="camera-container hidden">
                                    <video id="cameraFeed" autoplay playsinline></video>
                                    <canvas id="cameraCanvas" class="hidden"></canvas>
                                    <div class="camera-controls">
                                        <button type="button" class="btn-capture" id="captureBtn">üîò ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</button>
                                        <button type="button" class="btn-cancel" id="closeCameraBtn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                    </div>
                                </div>

                                <img id="imagePreview" src="" alt="Preview" class="hidden">
                            </div>

                            <!-- Human Verification (Starts Hidden) -->
                            <div class="verification-box hidden" id="verificationBox"
                                style="margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.02); border: 1px solid rgba(0,0,0,0.1); border-radius: 12px; text-align: center;">
                                <label for="verifyAnswer"
                                    style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 1rem;">
                                    üõ°Ô∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°: <span id="verifyQuestion"
                                        style="font-weight: bold; color: var(--primary);">Loading...</span> = ?
                                </label>
                                <div style="display: flex; gap: 10px; justify-content: center;">
                                    <input type="number" id="verifyAnswer" placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö"
                                        style="padding: 10px; border-radius: 8px; border: 1px solid #ccc; width: 140px; text-align: center; font-size: 1.2rem;">
                                </div>
                                <p id="verifyError" class="hidden"
                                    style="color: #ef4444; margin-top: 5px; font-size: 0.9rem;">
                                    ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
                            </div>
                        </div>

                    </div>
                    <!-- Step 1 End -->



                    <!-- Step 2: Education -->
                    <div class="form-step" id="step2">
                        <div class="form-section">
                            <label class="section-title">2. ‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                            <p class="section-desc">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>

                            <div id="universityLookup">
                                <div class="input-group">
                                    <label for="university">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</label>
                                    <select id="university">
                                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢...</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="faculty">‡∏Ñ‡∏ì‡∏∞ (‡πÅ‡∏ñ‡∏ö‡∏™‡∏µ‡∏Ñ‡∏£‡∏∏‡∏¢)</label>
                                    <select id="faculty" disabled>
                                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞...</option>
                                    </select>
                                </div>
                            </div>
                            <div class="preview-result glass hidden" id="previewResult" style="margin-top: 20px;">
                                <p>‡∏Ñ‡∏£‡∏∏‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:</p>
                                <div class="gown-preview-container">
                                    <img id="gownPreviewImg" src="" alt="Gown Preview">
                                </div>
                            </div>

                            <div id="manualEntryBox" class="input-group" style="margin-top: 15px;">
                                <label>‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° / ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô (Optional)</label>
                                <textarea id="custom_gown_details"
                                    placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ñ‡∏ö‡∏™‡∏µ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á / ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ì‡∏∞ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô"></textarea>
                            </div>


                        </div>
                        <div class="step-actions">
                            <button type="button" class="btn-prev" onclick="prevStep(1)"><span>‚¨ÖÔ∏è</span>
                                ‡∏Å‡∏•‡∏±‡∏ö</button>
                            <button type="button" class="btn-next" onclick="nextStep(3)">‡∏ï‡πà‡∏≠‡πÑ‡∏õ
                                <span>‚û°Ô∏è</span></button>
                        </div>
                    </div>

                    <!-- Step 3: Hairstyle -->
                    <div class="form-step" id="step3">
                        <div class="form-section">
                            <label class="section-title">3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏£‡∏á‡∏ú‡∏° (Optional)</label>
                            <p class="section-desc">‡πÉ‡∏ä‡πâ‡∏ó‡∏£‡∏á‡∏ú‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô‡∏†‡∏≤‡∏û <u>‡∏Å‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</u></p>

                            <div class="input-group">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                    <label class="checkbox-label"
                                        style="display: flex; align-items: center; cursor: pointer; margin: 0;">
                                        <input type="checkbox" id="enableHairstyle"
                                            style="margin-right: 8px; width: 20px; height: 20px;">
                                        <span class="label-text" style="font-size: 1rem;">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏£‡∏á‡∏ú‡∏°</span>
                                    </label>
                                </div>

                                <div class="hair-options hidden" id="hairOptions">
                                    <!-- Options injected by JS -->
                                </div>
                            </div>

                            <div class="step-actions">
                                <button type="button" class="btn-prev" onclick="prevStep(2)"><span>‚¨ÖÔ∏è</span>
                                    ‡∏Å‡∏•‡∏±‡∏ö</button>
                                <button type="button" class="btn-next" onclick="nextStep(4)">‡∏ï‡πà‡∏≠‡πÑ‡∏õ
                                    <span>‚û°Ô∏è</span></button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Background & Submit -->
                    <div class="form-step" id="step4">
                        <div class="form-section">
                            <label class="section-title">4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á & ‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</label>
                            <div class="input-group">
                                <label>‡∏™‡∏µ‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
                                <input type="hidden" id="bgColor" value="#FFFFFF">
                                <div id="bgColorSwatches" class="color-presets"></div>

                                <!-- Preview Box -->
                                <div
                                    style="margin-top: 20px; display: flex; flex-direction: column; align-items: center;">
                                    <label
                                        style="font-size: 0.9rem; color: #64748b; margin-bottom: 8px;">‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á</label>
                                    <div id="bgPreviewBox" class="bg-preview-box"></div>
                                </div>
                            </div>
                        </div>

                        <div class="step-actions" style="margin-top: 25px;">
                            <button type="button" class="btn-prev" onclick="prevStep(3)"><span>‚¨ÖÔ∏è</span>
                                ‡∏Å‡∏•‡∏±‡∏ö</button>
                            <button type="submit" class="btn-submit" id="submitBtn">
                                <span class="btn-text">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏£‡∏π‡∏õ üöÄ</span>
                                <div class="loader hidden"></div>
                            </button>
                        </div>

                        <div id="statusMessage" class="status-message"></div>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <div id="notificationContainer"></div>

    <!-- Order Success Modal -->
    <div id="successModal" class="modal-overlay hidden">
        <div class="modal-content success-card">
            <div class="success-icon-wrapper">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"
                    stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>
            <h2>‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!</h2>

            <div class="pin-box">
                <p>‡∏£‡∏´‡∏±‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (PIN)</p>
                <h1 id="successPin">AAAAAA</h1>
            </div>

            <p style="color: #64748b; margin-top: 20px;">
                ‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ:
            </p>

            <a href="https://line.me/ti/p/gqIluRmdJ_" target="_blank" rel="noopener noreferrer" class="line-btn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/LINE_logo.svg" alt="LINE" width="24">
                <span>‡πÅ‡∏à‡πâ‡∏á‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE</span>
            </a>

            <button onclick="location.reload()" class="btn-home" style="margin-top: 15px;">
                ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </button>
        </div>
    </div>

    <script src="js/app.js?v=13"></script>
</body>

</html>